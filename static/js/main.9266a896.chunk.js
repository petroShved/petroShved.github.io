(this.webpackJsonprplanet=this.webpackJsonprplanet||[]).push([[0],{139:function(e,t,a){},140:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),i=a(13),c=a.n(i),o=(a(139),a(6)),s=(a(140),a(61)),l=a.n(s),d=a(58),u=a(26),h=a(16),p=a(105),f=a(106),b=a(50),m=a.n(b),j=a(107),v=a.n(j),w=a(108),x=a(15),O=[{field:"id",headerName:"ID",width:70},{field:"collectionId",headerName:"Collection Id",width:200},{field:"collection",headerName:"collection",width:200},{field:"rarity",headerName:"Rarity",width:200},{field:"rarityId",headerName:"Rarity ID",width:200},{field:"schema",headerName:"Schema",width:150},{field:"value",headerName:"Value",width:120,type:"number"},{field:"realValue",headerName:"RealValue",width:150,type:"number"},{field:"wax",headerName:"Wax",width:120,type:"number"},{field:"saleId",headerName:"SaleId",renderCell:function(e){return Object(x.jsx)("a",{href:"https://wax.atomichub.io/market/sale/".concat(e.value),target:"_blank",children:e.value})},width:150},{field:"profit",headerName:"AE/WAX",width:150,type:"number"},{field:"months",headerName:"Months",width:300,type:"number"}],g=function(e){var t=e.repos,a=e.pools;if(!t||0===t.length)return Object(x.jsx)("p",{children:"No repos, sorry"});var n=0,i=[];a&&t.forEach((function(e){Array.isArray(e.rarities)&&e.rarities.length>0&&e.rarities.forEach((function(t){n+=1;var r=a.find((function(t){return t.id===e.collection}));r&&i.push({id:n,collectionId:e.id,collection:e.collection,rarity:t.rarity,schema:e.schema,rarityId:e.rarity_id,value:+t.one_asset_value/1e4,realValue:1*+t.one_asset_value*(+r.fraction.split(" AETHER")[0]/r.staked),wax:0,saleId:0,profit:0,months:0})}))}));var c=Object(r.useRef)(i),s=Object(r.useRef)(0),b=Object(r.useState)(c.current),j=Object(o.a)(b,2),g=j[0],y=j[1],_=Object(r.useState)(s.current),k=Object(o.a)(_,2),N=k[0],I=k[1];return Object(r.useEffect)((function(){(function(){var e=Object(f.a)(l.a.mark((function e(){var t,a,r,n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.prev=1,e.next=4,m.a.get("https://wax.alcor.exchange/api/markets/29");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("error while load price");case 10:t&&(a=t.data.last_price),r=Object(p.a)(i),e.prev=12,o=l.a.mark((function e(){var t,r,i,o,p,f,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,i=Object(h.a)(c.current),o=i.find((function(e){return e.id===r.id})),t={state:"1",limit:"1",page:"1",order:"asc",sort:"price",symbol:"WAX",collection_name:o.collection},Object(u.a)(t,"data:text.".concat(r.rarityId),o.rarity),Object(u.a)(t,"schema_name",o.schema),Object(u.a)(t,"show_seller_contracts","false"),p=t,f=void 0,b=!1,e.prev=6,e.next=9,m.a.post("https://wax.api.atomicassets.io/atomicmarket/v1/sales",p);case 9:f=e.sent,s.current+=1,I(s.current+1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),b=!0,console.log("error while load price");case 18:return b||(i=i.map((function(e){if(r.id===e.id){var t=f.data.data&&f.data.data.length?+f.data.data[0].price.amount/1e8:0,n=f.data.data&&f.data.data.length?f.data.data[0].sale_id:0,i=t/o.realValue,c=a?v()(t/a/o.realValue*36e5,{units:["y","mo","d","h"],round:!0}):0;return Object(d.a)(Object(d.a)({},e),{},{wax:t,saleId:n,profit:i,months:c})}return e})),c.current=Object(h.a)(i),y(Object(h.a)(i))),e.next=21,new Promise((function(e,t){setTimeout(e,2e3)}));case 21:case"end":return e.stop()}}),e,null,[[6,14]])})),r.s();case 15:if((n=r.n()).done){e.next=19;break}return e.delegateYield(o(),"t1",17);case 17:e.next=15;break;case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(12),r.e(e.t2);case 24:return e.prev=24,r.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,7],[12,21,24,27]])})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(g),Object(x.jsxs)("div",{children:[N," / ",i.length,Object(x.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(x.jsx)(w.a,{rows:g,columns:O,pageSize:100})})]})},y=a(112),_=["isLoading"];var k=function(e){return function(t){var a=t.isLoading,r=Object(y.a)(t,_);return a?Object(x.jsx)("p",{style:{textAlign:"center",fontSize:"30px"},children:"Hold on, fetching data may take some time :)"}):Object(x.jsx)(e,Object(d.a)({},r))}};var N=function(){var e=k(g),t=Object(r.useState)({loading:!1,repos:null,pools:null}),a=Object(o.a)(t,2),n=a[0],i=a[1];return Object(r.useEffect)((function(){i({loading:!0});m.a.post("https://chain.wax.io/v1/chain/get_table_rows",{code:"s.rplanet",index_position:1,json:!0,key_type:"i64",limit:1e3,lower_bound:"",reverse:!1,scope:"s.rplanet",show_payer:!1,table:"collections",upper_bound:""}).then((function(e){m.a.post("https://chain.wax.io/v1/chain/get_table_rows",{code:"s.rplanet",index_position:1,json:!0,key_type:"i64",limit:1e3,lower_bound:"",reverse:!1,scope:"s.rplanet",show_payer:!1,table:"pools",upper_bound:""}).then((function(t){return i({loading:!1,repos:e.data.rows,pools:t.data.rows})}))}))}),[i]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("div",{className:"repo-container",children:Object(x.jsx)(e,{isLoading:n.loading,repos:n.repos,pools:n.pools})}),Object(x.jsx)("footer",{children:Object(x.jsxs)("div",{className:"footer",children:["Built"," ",Object(x.jsx)("span",{role:"img","aria-label":"love",children:"\ud83d\udc9a"})," "]})})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,214)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,i=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),i(e),c(e)}))};c.a.render(Object(x.jsx)(n.a.StrictMode,{children:Object(x.jsx)(N,{})}),document.getElementById("root")),I()}},[[164,1,2]]]);
//# sourceMappingURL=main.9266a896.chunk.js.map