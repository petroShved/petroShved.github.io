(this.webpackJsonprplanet=this.webpackJsonprplanet||[]).push([[0],{139:function(e,t,a){},140:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(13),i=a.n(c),o=(a(139),a(5)),s=(a(140),a(107)),l=a(46),d=a.n(l),u=a(43),h=a(21),p=a(15),f=a(78),b=a(37),m=a.n(b),j=a(79),v=a.n(j),x=a(211),w=a(108),O=a(16),g=function(e){var t=e.repos,a=e.pools;if(!t||0===t.length)return Object(O.jsx)("p",{children:"No repos, sorry"});var n=0,c=[];a&&t.forEach((function(e){Array.isArray(e.rarities)&&e.rarities.length>0&&e.rarities.forEach((function(t){n+=1;var r=a.find((function(t){return t.id===e.collection}));r&&c.push({id:n,collectionId:e.id,collection:e.collection,rarity:t.rarity,schema:e.schema,rarityId:e.rarity_id,value:+t.one_asset_value/1e4,realValue:1*+t.one_asset_value*(+r.fraction.split(" AETHER")[0]/r.staked),wax:0,saleId:0,profit:0,months:0,refresh:n})}))}));var i=Object(r.useRef)(c),l=Object(r.useRef)(0),b=Object(r.useState)(i.current),j=Object(o.a)(b,2),g=j[0],y=j[1],_=Object(r.useState)(l.current),k=Object(o.a)(_,2),N=k[0],I=k[1],A=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,r,n,c,o,s,f,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=0,e.prev=1,e.next=4,m.a.get("https://wax.alcor.exchange/api/markets/29");case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("error while load price");case 10:return r&&(n=r.data.last_price),c=Object(p.a)(i.current),o=c.find((function(e){return e.id===t})),a={state:"1",limit:"1",page:"1",order:"asc",sort:"price",symbol:"WAX",collection_name:o.collection},Object(h.a)(a,"data:text.".concat(o.rarityId),o.rarity),Object(h.a)(a,"schema_name",o.schema),Object(h.a)(a,"show_seller_contracts","false"),s=a,b=!1,e.prev=16,e.next=19,m.a.post("https://wax.api.atomicassets.io/atomicmarket/v1/sales",s);case 19:f=e.sent,l.current+=1,I(l.current+1),e.next=28;break;case 24:e.prev=24,e.t1=e.catch(16),b=!0,console.log("error while load price");case 28:return b||(c=c.map((function(e){if(t===e.id){var a=f.data.data&&f.data.data.length?+f.data.data[0].price.amount/1e8:0,r=f.data.data&&f.data.data.length?f.data.data[0].sale_id:0,c=a/o.realValue,i=n?v()(a/n/o.realValue*36e5,{units:["y","mo","d","h"],round:!0}):0;return Object(u.a)(Object(u.a)({},e),{},{wax:a,saleId:r,profit:c,months:i})}return e})),i.current=Object(p.a)(c),y(Object(p.a)(c))),e.next=31,new Promise((function(e,t){setTimeout(e,1e3)}));case 31:case"end":return e.stop()}}),e,null,[[1,7],[16,24]])})));return function(t){return e.apply(this,arguments)}}(),E=[{field:"id",headerName:"ID",width:70},{field:"collectionId",headerName:"Collection Id",width:200},{field:"collection",headerName:"collection",width:200},{field:"rarity",headerName:"Rarity",width:200},{field:"rarityId",headerName:"Rarity ID",width:200},{field:"schema",headerName:"Schema",width:150},{field:"value",headerName:"Value",width:120,type:"number"},{field:"realValue",headerName:"RealValue",width:150,type:"number"},{field:"wax",headerName:"Wax",width:120,type:"number"},{field:"saleId",headerName:"SaleId",renderCell:function(e){return Object(O.jsx)("a",{href:"https://wax.atomichub.io/market/sale/".concat(e.value),target:"_blank",children:e.value})},width:150},{field:"profit",headerName:"AE/WAX",width:150,type:"number"},{field:"months",headerName:"Months",width:300,type:"number"},{field:"refresh",headerName:"Refresh",renderCell:function(e){return Object(O.jsx)("button",{onClick:function(){return A(e.value)},children:Object(O.jsx)(x.a,{children:"refresh"})})},width:150}];return Object(r.useEffect)((function(){(function(){var e=Object(f.a)(d.a.mark((function e(){var t,a,r,n,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=0,e.prev=1,e.next=4,m.a.get("https://wax.alcor.exchange/api/markets/29");case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log("error while load price");case 10:t&&(a=t.data.last_price),r=Object(s.a)(c),e.prev=12,o=d.a.mark((function e(){var t,r,c,o,s,f,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.value,c=Object(p.a)(i.current),o=c.find((function(e){return e.id===r.id})),t={state:"1",limit:"1",page:"1",order:"asc",sort:"price",symbol:"WAX",collection_name:o.collection},Object(h.a)(t,"data:text.".concat(r.rarityId),o.rarity),Object(h.a)(t,"schema_name",o.schema),Object(h.a)(t,"show_seller_contracts","false"),s=t,f=void 0,b=!1,e.prev=6,e.next=9,m.a.post("https://wax.api.atomicassets.io/atomicmarket/v1/sales",s);case 9:f=e.sent,l.current+=1,I(l.current+1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(6),b=!0,console.log("error while load price");case 18:return b||(c=c.map((function(e){if(r.id===e.id){var t=f.data.data&&f.data.data.length?+f.data.data[0].price.amount/1e8:0,n=f.data.data&&f.data.data.length?f.data.data[0].sale_id:0,c=t/o.realValue,i=a?v()(t/a/o.realValue*36e5,{units:["y","mo","d","h"],round:!0}):0;return Object(u.a)(Object(u.a)({},e),{},{wax:t,saleId:n,profit:c,months:i})}return e})),i.current=Object(p.a)(c),y(Object(p.a)(c))),e.next=21,new Promise((function(e,t){setTimeout(e,1e3)}));case 21:case"end":return e.stop()}}),e,null,[[6,14]])})),r.s();case 15:if((n=r.n()).done){e.next=19;break}return e.delegateYield(o(),"t1",17);case 17:e.next=15;break;case 19:e.next=24;break;case 21:e.prev=21,e.t2=e.catch(12),r.e(e.t2);case 24:return e.prev=24,r.f(),e.finish(24);case 27:case"end":return e.stop()}}),e,null,[[1,7],[12,21,24,27]])})));return function(){return e.apply(this,arguments)}})()()}),[]),console.log(g),Object(O.jsxs)("div",{children:[N," / ",c.length,Object(O.jsx)("div",{style:{height:"100vh",width:"100%"},children:Object(O.jsx)(w.a,{rows:g.filter((function(e){return e.profit>0})),columns:E,sortModel:[{field:"profit",sort:"asc"}]})})]})},y=a(112),_=["isLoading"];var k=function(e){return function(t){var a=t.isLoading,r=Object(y.a)(t,_);return a?Object(O.jsx)("p",{style:{textAlign:"center",fontSize:"30px"},children:"Hold on, fetching data may take some time :)"}):Object(O.jsx)(e,Object(u.a)({},r))}};var N=function(){var e=k(g),t=Object(r.useState)({loading:!1,repos:null,pools:null}),a=Object(o.a)(t,2),n=a[0],c=a[1];return Object(r.useEffect)((function(){c({loading:!0});m.a.post("https://chain.wax.io/v1/chain/get_table_rows",{code:"s.rplanet",index_position:1,json:!0,key_type:"i64",limit:1e3,lower_bound:"",reverse:!1,scope:"s.rplanet",show_payer:!1,table:"collections",upper_bound:""}).then((function(e){m.a.post("https://chain.wax.io/v1/chain/get_table_rows",{code:"s.rplanet",index_position:1,json:!0,key_type:"i64",limit:1e3,lower_bound:"",reverse:!1,scope:"s.rplanet",show_payer:!1,table:"pools",upper_bound:""}).then((function(t){return c({loading:!1,repos:e.data.rows,pools:t.data.rows})}))}))}),[c]),Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("div",{className:"repo-container",children:Object(O.jsx)(e,{isLoading:n.loading,repos:n.repos,pools:n.pools})}),Object(O.jsx)("footer",{children:Object(O.jsxs)("div",{className:"footer",children:["Built"," ",Object(O.jsx)("span",{role:"img","aria-label":"love",children:"\ud83d\udc9a"})," "]})})]})},I=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,217)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),r(e),n(e),c(e),i(e)}))};i.a.render(Object(O.jsx)(n.a.StrictMode,{children:Object(O.jsx)(N,{})}),document.getElementById("root")),I()}},[[164,1,2]]]);
//# sourceMappingURL=main.cdc9a741.chunk.js.map