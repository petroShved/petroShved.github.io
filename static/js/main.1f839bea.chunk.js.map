{"version":3,"sources":["components/List.jsx","components/withListLoading.jsx","App.js","reportWebVitals.js","index.js"],"names":["columns","field","headerName","width","renderCell","params","href","value","target","type","List","props","repos","pools","length","i","arrayOfRows","forEach","repo","Array","isArray","rarities","rarity","pool","find","p","id","collection","push","collectionId","schema","rarityId","rarity_id","one_asset_value","realValue","fraction","split","staked","wax","saleId","profit","arrayRef","useRef","countRef","useState","current","rows","setRows","count","setCount","useEffect","a","item","newArray","originalItem","z","body","response","error","axios","post","console","log","map","itemN","data","price","amount","sale_id","Promise","resolve","reject","setTimeout","getPrices","style","height","pageSize","WithListLoading","Component","isLoading","textAlign","fontSize","App","ListLoading","withListLoading","loading","appState","setAppState","code","index_position","json","key_type","limit","lower_bound","reverse","scope","show_payer","table","upper_bound","then","res","res2","className","role","aria-label","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.1f839bea.chunk.js","sourcesContent":["import React, {useState, useEffect, useRef} from 'react';\r\nimport axios from 'axios';\r\nimport { useAsync } from \"react-async\"\r\nimport { DataGrid } from '@material-ui/data-grid';\r\n\r\nconst columns = [\r\n    { field: 'id', headerName: 'ID', width: 70 },\r\n    { field: 'collectionId', headerName: 'Collection Id', width: 200 },\r\n    { field: 'collection', headerName: 'collection', width: 200 },\r\n    { field: 'rarity', headerName: 'Rarity', width: 200 },\r\n    { field: 'rarityId', headerName: 'Rarity ID', width: 200 },\r\n    { field: 'schema', headerName: 'Schema', width: 200 },\r\n    { field: 'value', headerName: 'Value', width: 200 },\r\n    { field: 'realValue', headerName: 'RealValue', width: 200 },\r\n    { field: 'wax', headerName: 'Wax', width: 200 },\r\n    { field: 'saleId', headerName: 'SaleId', renderCell: (params) => (\r\n            <a href={`https://wax.atomichub.io/market/sale/${params.value}`} target=\"_blank\">{params.value}</a>\r\n        ), width: 250 },\r\n    { field: 'profit', headerName: 'AE/WAX', width: 250, type: 'number' },\r\n];\r\n\r\n\r\nconst List = (props) => {\r\n\r\n    const { repos, pools } = props;\r\n    if (!repos || repos.length === 0) return <p>No repos, sorry</p>;\r\n    let i = 0;\r\n\r\n    const arrayOfRows = [];\r\n    if (pools) {\r\n        repos.forEach(repo => {\r\n            if(Array.isArray(repo.rarities) && repo.rarities.length > 0) {\r\n                repo.rarities.forEach(rarity => {\r\n                    i = i+1;\r\n                    const pool = pools.find((p)=> p.id === repo.collection);\r\n                    if(pool) {\r\n                        arrayOfRows.push({\r\n                            id: i,\r\n                            collectionId: repo.id,\r\n                            collection: repo.collection,\r\n                            rarity: rarity.rarity,\r\n                            schema: repo.schema,\r\n                            rarityId: repo.rarity_id,\r\n                            value: (+rarity.one_asset_value)/10000,\r\n                            realValue: (+rarity.one_asset_value)*1*((+pool.fraction.split(\" AETHER\")[0])/pool.staked),\r\n                            wax: 0,\r\n                            saleId: 0,\r\n                            profit: 0,\r\n                        })\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    const arrayRef = useRef(arrayOfRows);\r\n    const counts = 0;\r\n    const countRef = useRef(counts);\r\n    const [rows, setRows] = useState(arrayRef.current);\r\n    const [count, setCount] = useState(countRef.current);\r\n    useEffect(()=>{\r\n        const getPrices = async() => {\r\n            for ( let item of arrayOfRows) {\r\n                let newArray = [...arrayRef.current];\r\n                let originalItem = newArray.find(z => z.id === item.id);\r\n                const body = {\r\n                    \"state\":\"1\",\r\n                    \"limit\":\"1\",\r\n                    \"page\":\"1\",\r\n                    \"order\":\"asc\",\r\n                    \"sort\":\"price\",\r\n                    \"symbol\":\"WAX\",\r\n                    \"collection_name\": originalItem.collection,\r\n                    [`data:text.${item.rarityId}`]: originalItem.rarity,\r\n                    \"schema_name\": originalItem.schema,\r\n                    \"show_seller_contracts\":\"false\"\r\n                };\r\n                let response;\r\n                let error = false;\r\n                try {\r\n                    response = await axios.post('https://wax.api.atomicassets.io/atomicmarket/v1/sales', body);\r\n                    countRef.current += 1;\r\n                    setCount(countRef.current+1);\r\n                } catch (err) {\r\n                    error = true;\r\n                    console.log('error while load price')\r\n                }\r\n                if (!error) {\r\n                    newArray = newArray.map((itemN) => {\r\n                        if (item.id === itemN.id) {\r\n                            const wax = response.data.data && response.data.data.length ? +response.data.data[0].price.amount / 100000000 : 0;\r\n                            const saleId = response.data.data && response.data.data.length ? response.data.data[0].sale_id: 0;\r\n                            const profit= wax / originalItem.realValue;\r\n                            return {...itemN,\r\n                                wax,\r\n                                saleId,\r\n                                profit,\r\n                            }\r\n                        }\r\n                        return itemN;\r\n                    });\r\n                    arrayRef.current = [...newArray];\r\n                    setRows([...newArray]);\r\n                }\r\n                await new Promise((resolve, reject)=> {setTimeout(resolve, 2000)});\r\n            }\r\n        }\r\n        getPrices();\r\n    }, []);\r\n    console.log(rows);\r\n    return (\r\n        <div>\r\n            {count} / {arrayOfRows.length}\r\n            <div style={{ height: '100vh', width: '100%' }}>\r\n                <DataGrid rows={rows} columns={columns} pageSize={100} />\r\n            </div>\r\n        </div>\r\n\r\n    );\r\n};\r\nexport default List;\r\n","import React from 'react';\r\n\r\nfunction WithListLoading(Component) {\r\n    return function WihLoadingComponent({ isLoading, ...props }) {\r\n        if (!isLoading) return <Component {...props} />;\r\n        return (\r\n            <p style={{ textAlign: 'center', fontSize: '30px' }}>\r\n                Hold on, fetching data may take some time :)\r\n            </p>\r\n        );\r\n    };\r\n}\r\nexport default WithListLoading;\r\n","import React, { useEffect, useState } from 'react';\nimport './App.css';\nimport List from './components/List';\nimport withListLoading from './components/withListLoading';\nimport axios from \"axios\";\nfunction App() {\n  const ListLoading = withListLoading(List);\n  const [appState, setAppState] = useState({\n    loading: false,\n    repos: null,\n    pools: null,\n  });\n\n  useEffect(() => {\n    setAppState({ loading: true });\n        const response = axios.post('https://chain.wax.io/v1/chain/get_table_rows', {\n            code: \"s.rplanet\",\n            index_position: 1,\n            json: true,\n            key_type: \"i64\",\n            limit: 1000,\n            lower_bound: \"\",\n            reverse: false,\n            scope: \"s.rplanet\",\n            show_payer: false,\n            table: \"collections\",\n            upper_bound: \"\"\n        }).then((res) =>  {\n            const pools = axios.post('https://chain.wax.io/v1/chain/get_table_rows', {\n                code: \"s.rplanet\",\n                index_position: 1,\n                json: true,\n                key_type: \"i64\",\n                limit: 1000,\n                lower_bound: \"\",\n                reverse: false,\n                scope: \"s.rplanet\",\n                show_payer: false,\n                table: \"pools\",\n                upper_bound: \"\"\n            }) .then((res2) =>  setAppState({ loading: false, repos: res.data.rows, pools: res2.data.rows }))\n        });\n\n  }, [setAppState]);\n  return (\n      <div className='App'>\n        <div className='repo-container'>\n          <ListLoading isLoading={appState.loading} repos={appState.repos} pools={appState.pools} />\n        </div>\n        <footer>\n          <div className='footer'>\n            Built{' '}\n            <span role='img' aria-label='love'>\n            ðŸ’š\n          </span>{' '}\n          </div>\n        </footer>\n      </div>\n  );\n}\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}